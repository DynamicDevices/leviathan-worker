<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Leviathan Helpers</title>
	<meta name="description" content="Documentation for Leviathan Helpers">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/pages.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Leviathan Helpers</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="modules.html">Globals</a>
				</li>
			</ul>
			<h1>Leviathan Helpers</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#leviathan" id="leviathan" style="color: inherit; text-decoration: none;">
					<h1>Leviathan</h1>
				</a>
				<p><a href="https://github.com/balena-io/leviathan/issues"><img src="https://img.shields.io/github/issues/balena-io/leviathan.svg" alt="GitHub Issues"></a>
					<a href="https://github.com/balena-io/leviathan/pulls"><img src="https://img.shields.io/github/issues-pr/balena-io/leviathan.svg" alt="GitHub pull requests"></a>
					<a href="https://nodejs.org/download/release/v12.0.0/"><img src="https://img.shields.io/badge/node-v12.0.0-green.svg" alt="node"></a>
				<a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/license-APACHE%202.0-blue.svg" alt="License"></a></p>
				<p><a href="https://dashboard.balena-cloud.com/deploy?repoUrl=https://github.com/balena-os/leviathan"><img src="https://www.balena.io/deploy.svg" alt="balena deploy button"></a></p>
				<blockquote>
					<p>A distributed testing framework for hardware</p>
				</blockquote>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<p>Leviathan allows for running tests either on a device connected to and controlled by a testbot rig, or on a virtualized QEMU worker. Follow the <a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart.html">quickstart</a> guide to start your first test. </p>
				<a href="#clone-the-repository" id="clone-the-repository" style="color: inherit; text-decoration: none;">
					<h3>Clone the repository</h3>
				</a>
				<ul>
					<li>Clone this repository with <code>git clone --recursive</code> or</li>
					<li>Run <code>git clone</code> and then <code>git submodule update --init --recursive</code> to install submodules.</li>
				</ul>
				<a href="#prerequisites-needed" id="prerequisites-needed" style="color: inherit; text-decoration: none;">
					<h3>Prerequisites needed</h3>
				</a>
				<ul>
					<li>Install Docker, node and npm in your system. We recommend installing <a href="https://github.com/nvm-sh/nvm#install--update-script">LTS versions from NVM</a>.</li>
					<li>Download the balenaOS image you want to test on your DUT from <a href="https://balena.io/os#download">balena.io/os</a>.</li>
				</ul>
				<a href="#worker-setup" id="worker-setup" style="color: inherit; text-decoration: none;">
					<h3>Worker setup</h3>
				</a>
				<p>A worker is a component on which your tests actually runs. It can be both real hardware or virtualised environments. Leviathan is designed to work with multiple workers. Following are detailed instructions on how to setup each type of worker:</p>
				<a href="#testbot-setup" id="testbot-setup" style="color: inherit; text-decoration: none;">
					<h4>Testbot setup</h4>
				</a>
				<p>Start with building your standalone testbot by <a href="https://github.com/balena-io-hardware/testbot-hardware/blob/master/documentation/getting-started.md#quick-start-guide-for-testbot">following the guide</a>.</p>
				<a href="#qemu" id="qemu" style="color: inherit; text-decoration: none;">
					<h4>QEMU</h4>
				</a>
				<p>Run <code>make local</code> to build the core and worker services and run the worker using docker-compose.
				Worker configuration variables can be specified in <code>docker-compose.local.yml</code>, under <code>environment</code>. The default configuration should suffice in most cases.</p>
				<table>
					<thead>
						<tr>
							<th>Variable</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody><tr>
							<td>QEMU_ARCH</td>
							<td>Architecture to virtualize (default: x86_64)</td>
						</tr>
						<tr>
							<td>QEMU_CPUS</td>
							<td>Number of CPUs to virtualize (default: 4)</td>
						</tr>
						<tr>
							<td>QEMU_MEMORY</td>
							<td>Amount of memory to virtualize (default: 2G)</td>
						</tr>
						<tr>
							<td>QEMU_BRIDGE_NAME</td>
							<td>Name of bridge to use for networking (default: br0)</td>
						</tr>
						<tr>
							<td>QEMU_BRIDGE_ADDRESS</td>
							<td>IP address to assign to bridge</td>
						</tr>
						<tr>
							<td>QEMU_DHCP_RANGE</td>
							<td>Range of DHCP addresses to hand out to workers</td>
						</tr>
				</tbody></table>
				<a href="#configuration" id="configuration" style="color: inherit; text-decoration: none;">
					<h3>Configuration</h3>
				</a>
				<p>To run the tests, you need to specify the configuration of the worker.</p>
				<ul>
					<li>Create your test configuration by creating a <code>config.json</code> file using the <code>config.example.js</code> file in the workspace directory. Read the <a href="https://balena-os.github.io/leviathan/pages/Getting-Started/config-reference.html">config.js reference</a> to learn more about config.js properteries</li>
				</ul>
				<a href="#running-tests" id="running-tests" style="color: inherit; text-decoration: none;">
					<h3>Running tests</h3>
				</a>
				<p>Run the tests by navigating to the project directory and running:</p>
				<pre><code class="language-bash"><span style="color: #002339">make </span><span style="color: #1AB394">test</span>
</code></pre>
				<p>On first run, it will build the client (one-time process) and start the tests. </p>
				<a href="#instructions-for-rig-owners" id="instructions-for-rig-owners" style="color: inherit; text-decoration: none;">
					<h2>Instructions for rig-owners</h2>
				</a>
				<p>To push a new release to balenaCloud, run <code>npm install</code> and then push to the balenaCloud application.</p>
				<pre><code class="language-bash"><span style="color: #002339">balena push </span><span style="color: #7B30D0">&lt;</span><span style="color: #002339">appname</span><span style="color: #7B30D0">&gt;</span>
</code></pre>
				<a href="#documentation-for-leviathan-helpers" id="documentation-for-leviathan-helpers" style="color: inherit; text-decoration: none;">
					<h2>Documentation for Leviathan Helpers</h2>
				</a>
				<p>Documentation for Leviathan helpers can be found on <a href="https://balena-os.github.io/leviathan">https://balena-os.github.io/leviathan</a>. To generate the documentation, run the following command from either the root of the repository or the <code>core</code> directory.</p>
				<pre><code class="language-bash"><span style="color: #002339">npm install</span>
<span style="color: #002339">npm run docs</span>
</code></pre>
				<p>If the docs are generated successfully, you will be getting the success line as:</p>
				<pre><code class="language-bash"><span style="color: #002339">Info: Documentation generated at /path/to/documentation</span>
</code></pre>
				<a href="#support" id="support" style="color: inherit; text-decoration: none;">
					<h2>Support</h2>
				</a>
				<p>If you&#39;re having any problem, please <a href="https://github.com/balena-io/leviathan/issues/new">raise an issue</a> on GitHub and the balena team will be happy to help.</p>
				<a href="#contribute" id="contribute" style="color: inherit; text-decoration: none;">
					<h2>Contribute</h2>
				</a>
				<ul>
					<li>Issue Tracker: <a href="https://github.com/balena-io/leviathan/issues">github.com/balena-io/leviathan/issues</a></li>
					<li>Source Code: <a href="https://github.com/balena-io/leviathan">github.com/balena-io/leviathan</a></li>
				</ul>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>The project is licensed under the Apache 2.0 license.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="label pp-nav pp-group">
						<span>Getting-<wbr><wbr>Started</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/Getting-Started/quickstart.html">Quickstart</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/Getting-Started/config-reference.html">Config.js <wbr>Reference</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/Getting-Started/writing-tests.html">Writing tests</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/Getting-Started/reference-tips.html">Tips and <wbr>Reference</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/Getting-Started/learn-more.html">Links, and more links</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Helper <wbr>Methods</span>
					</li>
					<li class=" ">
						<a href="modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Archiver.html">Archiver</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Context.html">Context</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Graphics.html">Graphics</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Leviathan_Utility_helpers.html">Leviathan <wbr>Utility helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Leviathan_Worker_helpers.html">Leviathan <wbr>Worker helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/State.html">State</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Teardown.html">Teardown</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/Test.html">Test</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/balena_git_helpers.html">balena git helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/balenaCLI_helpers.html">balenaCLI helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/balenaOS_helpers.html">balenaOS helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/balenaSDK_helpers.html">balenaSDK helpers</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.json"><' + '/script>');</script>
</body>
</html>