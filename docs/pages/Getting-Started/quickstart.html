<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Quickstart | Leviathan Helpers</title>
	<meta name="description" content="Documentation for Leviathan Helpers">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../assets/css/main.css">
	<link rel="stylesheet" href="../../assets/css/pages.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../../assets/js/search.json" data-base="../..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../../index.html" class="title">Leviathan Helpers</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../../modules.html">Globals</a>
				</li>
				<li>
					<a href="quickstart.html">Getting-Started</a>
				</li>
				<li>
					<a href="quickstart.html">Quickstart</a>
				</li>
			</ul>
			<h1>Quickstart</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#quick-start" id="quick-start" style="color: inherit; text-decoration: none;">
					<h1>Quick start</h1>
				</a>
				<p>This is a quick start guide for using the leviathan remote testing framework with a testbot. As a prerequisite for this guide, you will have to prepare your testbot, using the following <a href="https://github.com/balena-io/testbot-hardware/blob/master/documentation/getting-started.md">guide</a>.</p>
				<a href="#prerequisites" id="prerequisites" style="color: inherit; text-decoration: none;">
					<h2>Prerequisites</h2>
				</a>
				<ul>
					<li>Ensure you have <code>docker</code> and node installed on your machine.</li>
					<li>Clone the <a href="https://github.com/balena-io/leviathan">leviathan</a> repository and then <code>git submodule update --init --recursive</code> to install submodules.</li>
				</ul>
				<a href="#build-your-configjson-file" id="build-your-configjson-file" style="color: inherit; text-decoration: none;">
					<h2>Build your config.json file</h2>
				</a>
				<ul>
					<li>Navigate to the <code>workspace</code> directory in the project using <code>cd workspace/</code></li>
					<li>Create a <code>config.js</code> file in the <code>workspace</code> directory using the <code>config.example.js</code> file. To know more about the properties, check the <a href="config-reference.html">Config.js reference</a>.</li>
				</ul>
				<p>Check the <a href="config-reference.html">Config.js reference</a> for more examples. </p>
				<a href="#start-your-first-test-run" id="start-your-first-test-run" style="color: inherit; text-decoration: none;">
					<h2>Start your first test run</h2>
				</a>
				<ul>
					<li>For the first test run, we will be running the <a href="https://github.com/balena-os/leviathan/tree/master/suites/e2e">e2e test suite</a>. Make sure the the <code>suite</code> property in your config.js is pointing to the e2e suites directory like:</li>
				</ul>
				<pre><code class="language-JS"><span style="color: #002339">suite: </span><span style="color: #A44185">`${</span><span style="color: #2F86D2">__dirname</span><span style="color: #A44185">}/../suites/e2e`</span><span style="color: #002339">,</span>
</code></pre>
				<ul>
					<li><p>[Optional] Set the image property to the <code>false</code> in the config.json file if you don&#39;t wish to provide a balenaOS image. The e2e test won&#39;t explicitly be needing a balenaOS image to run the test. </p>
					</li>
					<li><p>To start a test run, run the following command:</p>
					</li>
				</ul>
				<pre><code><span style="color: #2F86D2">make</span><span style="color: #002339"> </span><span style="color: #2F86D2">test</span>
</code></pre>
				<ul>
					<li>The logs will start streaming on the terminal for the test run. Wait for the test scenario to run and check the device logs on the dashboard in the meantime. If the test finished successfully without any errors, then your testbot is set up correctly and ready to run more tests.</li>
				</ul>
				<a href="#let39s-run-some-quotrealquot-tests" id="let39s-run-some-quotrealquot-tests" style="color: inherit; text-decoration: none;">
					<h2>Let&#39;s run some &quot;real&quot; tests</h2>
				</a>
				<p>We will start with a test run of the <a href="https://github.com/balena-os/meta-balena/tree/master/tests/suites">balenaOS unmanaged testing suite</a>. To get the tests clone the meta-balena repository and:</p>
				<ul>
					<li>Either copy the OS test suite from meta-balena to the <code>workspace</code> directory </li>
					<li>or point the <code>suite</code> property to the path of the OS test suite in the meta-balena directory.</li>
					<li>Extract the image you want to test to <code>./leviathan/workspace</code> and rename it to <code>balena.img</code>. You can downloaded unmanaged image from <a href="balena.io/os">balena.io/os</a>.</li>
				</ul>
				<pre><code class="language-js"><span style="color: #DC3EB7">module</span><span style="color: #002339">.</span><span style="color: #DC3EB7">exports</span><span style="color: #002339"> </span><span style="color: #7B30D0">=</span><span style="color: #002339"> {</span>
<span style="color: #002339">    deviceType: </span><span style="color: #A44185">&#039;&lt;DUT device type, for example &quot;raspberrypi3-64&quot;&gt;&#039;</span><span style="color: #002339">,</span>
<span style="color: #002339">    </span><span style="color: #357B42">// Multiple suites can be run on the same worker when specified as an array.</span>
<span style="color: #002339">    suite: </span><span style="color: #A44185">`${</span><span style="color: #2F86D2">__dirname</span><span style="color: #A44185">}/../suites/os`</span><span style="color: #002339">,</span>
<span style="color: #002339">    config: {</span>
<span style="color: #002339">        networkWired: </span><span style="color: #174781">false</span><span style="color: #002339">,</span>
<span style="color: #002339">        networkWireless: </span><span style="color: #174781">true</span><span style="color: #002339">,</span>
<span style="color: #002339">        downloadVersion: </span><span style="color: #A44185">&#039;latest&#039;</span><span style="color: #002339">,</span>
<span style="color: #002339">        interactiveTests: </span><span style="color: #174781">false</span><span style="color: #002339">,</span>
<span style="color: #002339">        balenaApiKey: </span><span style="color: #2F86D2">process</span><span style="color: #002339">.</span><span style="color: #2F86D2">env</span><span style="color: #002339">.</span><span style="color: #2F86D2">BALENACLOUD_API_KEY</span><span style="color: #002339">,</span>
<span style="color: #002339">        balenaApiUrl: </span><span style="color: #A44185">&#039;balena-cloud.com&#039;</span><span style="color: #002339">,</span>
<span style="color: #002339">        organization: </span><span style="color: #2F86D2">process</span><span style="color: #002339">.</span><span style="color: #2F86D2">env</span><span style="color: #002339">.</span><span style="color: #2F86D2">BALENACLOUD_ORG</span>
<span style="color: #002339">    },</span>
<span style="color: #002339">    image: </span><span style="color: #A44185">`${</span><span style="color: #2F86D2">__dirname</span><span style="color: #A44185">}/balena.img`</span><span style="color: #002339">,</span>
<span style="color: #002339">    </span><span style="color: #357B42">// Make sure the public device URL is activated for the device</span>
<span style="color: #002339">    </span><span style="color: #357B42">// Read the reference guide to understand the multiple ways workers can be specified. </span>
<span style="color: #002339">    workers: [</span><span style="color: #A44185">&#039;http://&lt;short UUID of your testbot in balenaCloud&gt;.local&#039;</span><span style="color: #002339">],</span>
<span style="color: #002339">};</span>
</code></pre>
				<blockquote>
					<p>For QEMU workers, use localhost (<code>http://localhost</code>) instead of the <code>*.local</code> address for the <code>workers</code> property in the config.json file.</p>
				</blockquote>
				<ul>
					<li>Run <code>make test</code> in the root of the project and watch the logs.</li>
					<li>At the end of the run, reports and logs for the test run will be stored in <code>workspace/reports</code> directory.</li>
				</ul>
				<a href="#where-do-you-go-from-here" id="where-do-you-go-from-here" style="color: inherit; text-decoration: none;">
					<h2>Where do you go from here?</h2>
				</a>
				<ol>
					<li>Start by <a href="writing-tests.html">writing your first test</a>.</li>
					<li>To know more about the config.js and it&#39;s properties, refer to <a href="config-reference.html">Config.js reference</a>.</li>
					<li>To understand the bigger picture about the project read/watch these <a href="learn-more.html">resources</a>.</li>
					<li>Some tips and references for <a href="reference-tips.html">writing better tests</a> with Leviathan.</li>
				</ol>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="label pp-nav pp-group">
						<span>Getting-<wbr><wbr>Started</span>
					</li>
					<li class="current pp-nav pp-page">
						<a href="quickstart.html">Quickstart</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="config-reference.html">Config.js <wbr>Reference</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="writing-tests.html">Writing tests</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="reference-tips.html">Tips and <wbr>Reference</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="learn-more.html">Links, and more links</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Helper <wbr>Methods</span>
					</li>
					<li class=" ">
						<a href="../../modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Archiver.html">Archiver</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Context.html">Context</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Graphics.html">Graphics</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Leviathan_Utility_helpers.html">Leviathan <wbr>Utility helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Leviathan_Worker_helpers.html">Leviathan <wbr>Worker helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/State.html">State</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Teardown.html">Teardown</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/Test.html">Test</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/balena_git_helpers.html">balena git helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/balenaCLI_helpers.html">balenaCLI helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/balenaOS_helpers.html">balenaOS helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="../../modules/balenaSDK_helpers.html">balenaSDK helpers</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../../assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="../../assets/js/search.json"><' + '/script>');</script>
</body>
</html>